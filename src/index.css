@import url('https://fonts.googleapis.com/css2?family=VT323&family=Press+Start+2P&family=Noto+Sans+TC:wght@400;500;700&display=swap');
@import "tailwindcss";

/* ===== 環境防護 ===== */
* {
  box-sizing: border-box;
}

@theme {
  --font-sans: "Noto Sans TC", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
}

:root {
  --base-font-size: 32px;
  --font-scale: 1.0;
}

@layer base {

  /* ===== 動態背景 ===== */
  body {
    font-family: 'VT323', 'Press Start 2P', var(--font-sans);
    font-size: var(--base-font-size);
    background-image: url(/Pixel_Art_Ghibli_Airship_Animation.gif);
    background-size: cover;
    background-attachment: fixed;
    background-position: center;
    background-repeat: no-repeat;
    background-color: #000;
    color: #1a202c;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* ===== 像素字體套用 ===== */
  input,
  button {
    font-family: 'VT323', 'Press Start 2P', var(--font-sans);
  }

  /* ===== 容器透明化 ===== */
  #root {
    background: transparent !important;
    background-color: transparent !important;
  }

  .app-container {
    background: transparent !important;
    background-color: transparent !important;
  }

  /* ===== Header 透明化與標題優化 ===== */
  header {
    background: transparent !important;
    background-color: transparent !important;
    border: none !important;
    box-shadow: none !important;
  }

  header h1 {
    color: #000000 !important;
    text-shadow: 1px 1px 0px #ffffff;
  }

  /* ===== Footer 透明化 ===== */
  footer {
    background: transparent !important;
    background-color: transparent !important;
    border: none !important;
    box-shadow: none !important;
  }

  .pixelated {
    image-rendering: pixelated;
    image-rendering: -moz-crisp-edges;
    image-rendering: crisp-edges;
  }

  /* Override Tailwind text utilities to scale with user preference */
  .text-xs {
    font-size: calc(1.375rem * var(--font-scale)) !important;
  }

  .text-sm {
    font-size: calc(1.5rem * var(--font-scale)) !important;
  }

  .text-base {
    font-size: calc(1.625rem * var(--font-scale)) !important;
  }

  .text-lg {
    font-size: calc(1.75rem * var(--font-scale)) !important;
  }

  .text-xl {
    font-size: calc(1.875rem * var(--font-scale)) !important;
  }

  .text-2xl {
    font-size: calc(2.125rem * var(--font-scale)) !important;
  }

  .text-3xl {
    font-size: calc(2.5rem * var(--font-scale)) !important;
  }

  .text-4xl {
    font-size: calc(2.875rem * var(--font-scale)) !important;
  }

  .text-5xl {
    font-size: calc(3.625rem * var(--font-scale)) !important;
  }

  .text-6xl {
    font-size: calc(4.375rem * var(--font-scale)) !important;
  }

  .text-7xl {
    font-size: calc(5.125rem * var(--font-scale)) !important;
  }

  .text-8xl {
    font-size: calc(6.625rem * var(--font-scale)) !important;
  }

  .text-9xl {
    font-size: calc(8.625rem * var(--font-scale)) !important;
  }
}

/* ===== RWD 響應式斷點 ===== */

/* 防止水平溢出 */
html,
body {
  max-width: 100vw;
  overflow-x: hidden;
}

/* 平板（≤ 768px）*/
@media (max-width: 768px) {
  :root {
    --base-font-size: 20px;
  }

  /* 修復 iOS Safari 無法處理 fixed 背景的問題 */
  body {
    background-attachment: scroll;
  }

  /* 確保觸控目標至少 44px（Apple/Google 建議最小觸控區域）*/
  input,
  button,
  select,
  textarea {
    min-height: 44px;
  }

  /* PixelCard 手機版縮減 padding，釋放更多寬度給圖表/內容 */
  .border-4.border-gray-800 {
    padding: 0.75rem !important;
  }

  /* Recharts 橫向滾動在 iOS 啟用觸控慣性 */
  [style*="overflow-x"] {
    -webkit-overflow-scrolling: touch;
  }
}

/* 小手機（≤ 480px）*/
@media (max-width: 480px) {
  :root {
    --base-font-size: 18px;
  }

  /* 確保所有圖片不超出容器 */
  img {
    max-width: 100%;
    height: auto;
  }

  /* 讓 recharts 圖表不超出容器 */
  .recharts-wrapper {
    max-width: 100% !important;
  }

  /* Pixel 主題裝飾性 box-shadow 縮減，避免超出螢幕邊緣 */
  .shadow-\[8px_8px_0_0_rgba\(0\,0\,0\,1\)\] {
    box-shadow: 4px 4px 0 0 rgba(0, 0, 0, 1) !important;
  }

  /* modal 寬度保護 */
  .fixed.inset-0>div {
    max-width: calc(100vw - 2rem);
  }
}